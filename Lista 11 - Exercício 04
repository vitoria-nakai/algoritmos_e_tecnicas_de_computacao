/*
Faça um programa que calcule a soma de duas matrizes quadradas de inteiros
que são passadas em um arquivo matriz.txt a primeira linha do arquivo
indica as dimensões da matriz.
*/

#include <stdio.h>
#include <stdlib.h>

void ler_matriz(FILE *f, int **matriz, int dim){
    for(int i = 0; i < dim; i++){
        for(int j = 0; j < dim; j++){
            fscanf(f, "%d", &matriz[i][j]);
        }
    }
}

int** def_tam_matriz(int dim){
    int **matriz = (int**)malloc(dim * sizeof(int*));
    for(int i = 0; i < dim; i++) matriz[i] = (int*)malloc(dim * sizeof(int));
    return matriz;
}

int main(){
    FILE *arquivo = fopen("matriz.txt", "r");
    if(arquivo == NULL){
        printf("Erro ao abrir o arquivo");
        return 1;
    }
    int dim;
    fscanf(arquivo, "%d", &dim);
    
    int **matriz_1 = def_tam_matriz(dim), **matriz_2 = def_tam_matriz(dim), **result = def_tam_matriz(dim);
    ler_matriz(arquivo, matriz_1, dim);
    ler_matriz(arquivo, matriz_2, dim);
    
    for(int i = 0; i < dim; i++){
        for(int j = 0; j < dim; j++){
            result[i][j] = matriz_1[i][j] + matriz_2[i][j];
        }
    }
    
    for(int i = 0; i < dim; i++){
        for(int j = 0; j < dim; j++){
            printf("%d\t", result[i][j]);
        }
        printf("\n");
    }
    
    if(fclose(arquivo) == -1){
        printf("Erro ao fechar arquivo.");
        return 1;
    }
    return 0;
    
    
}
